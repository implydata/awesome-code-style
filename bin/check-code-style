#!/usr/bin/env node

const path = require('path');
const yargs = require('yargs');
const glob = require('glob');

const validLevels = glob.sync(path.resolve(__dirname, '../rules/*.json'))
  .map(f => +path.basename(f, '.json'));

const argv = yargs
  .option('level', {
    alias: 'l',
    default: 0,
    choices: validLevels,
    description: `Strictness level, higher is stricter`
  })

  .option('all', {
    alias: 'a',
    default: false,
    description: `Lint all files instead of just what's staged for commit`
  })

  .help('h')
  .alias('h', 'help')

  .argv;

const { check } = require('../dist/index.js');

check(argv.all, argv.level);
