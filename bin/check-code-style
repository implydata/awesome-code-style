#!/usr/bin/env node

const path = require('path');
const yargs = require('yargs');
const glob = require('glob');

const validTSLevels = glob.sync(path.resolve(__dirname, '../rules/ts/*.json'))
  .map(f => +path.basename(f, '.json'));

const validSCSSLevels = glob.sync(path.resolve(__dirname, '../rules/scss/*.json'))
  .map(f => +path.basename(f, '.json'));

const argv = yargs
  .option('ts-level', {
    default: 0,
    choices: validTSLevels,
    description: `Strictness level for TypeScript linting, higher is stricter`
  })

  .option('scss-level', {
    default: 0,
    choices: validSCSSLevels,
    description: `Strictness level for SCSS linting, higher is stricter`
  })

  .option('all', {
    alias: 'a',
    default: false,
    description: `Lint all files instead of just what's staged for commit`
  })

  .help('h')
  .alias('h', 'help')

  .argv;

const { check } = require('../dist/index.js');

check(argv);
